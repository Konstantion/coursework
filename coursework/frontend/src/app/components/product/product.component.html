<ng-container *ngIf="(pageState$ | async) as pageState">
    <div class="container border my-3 rounded" style="height: 100hv;">
        <div class="container">
            <p-toast></p-toast>
            <p-confirmPopup></p-confirmPopup>
            <h1 class="text-center">Product: <i> {{ pageState.product.name }} </i></h1>
            <div class="row">
                <ng-container *ngIf="pageState.dataState === DataState.LOADING_STATE">
                    <app-spinner></app-spinner>
                </ng-container>
                <ng-container *ngIf="pageState.dataState === DataState.LOADED_STATE">
                    <div class="col-6">
                        <p><strong>Name:</strong> {{ pageState.product.name }}</p>
                        <p><strong>Price:</strong> {{ pageState.product.price }}</p>
                        <p><strong>Weight:</strong> {{ pageState.product.weight }}</p>
                        <p class="card-text cursor-pointer"><strong>Category: </strong><span class="badge"
                                [ngClass]="pageState.product.categoryId ? 'text-bg-success' : 'text-bg-danger'">
                                {{ pageState.category.name ? 'present' : 'absent' }} </span>
                        </p>
                        <p><strong>Description: </strong> {{ pageState.product.description }}</p>
                        <p><strong>Created At: </strong> {{ pageState.product.createdAt }}</p>
                        <p><strong>Deactivated At: </strong> {{ pageState.product.deactivateAt }}</p>
                        <p><strong>Status: </strong> <span class="badge"
                                [ngClass]="pageState.product.active ? 'text-bg-success' : 'text-bg-danger'">
                                {{ pageState.product.active ? 'active' : 'inactive' }} </span></p>
                        <div class="mb-3">
                            <button (click)="onActivate()"
                                class="btn btn-success me-3 w-25 border-1 border-dark">Activate</button>
                            <button (click)="onDeactivate()"
                                class="btn btn-warning me-3 w-25 border-1 border-dark">Deactivate</button>
                        </div>
                        <div class="mb-3">
                            <button class="btn btn-primary me-3 w-25 border-1 border-dark"
                                (click)="onUpdate()">Update</button>
                            <button class="btn btn-danger me-3 w-25 border-1 border-dark"
                                (click)="onDelete()">Delete</button>
                        </div>
                    </div>
                    <div class="col md-9">
                        <img class="img-thumbnail" [src]="arrayBufferToUrl(pageState.product.imageBytes)"
                            alt="Product Image">
                    </div>
                </ng-container>
            </div>
        </div>
    </div>
</ng-container>